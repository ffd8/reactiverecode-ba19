{
  "sketches": [
    {
      "sketchName": "array audio neu ausprobieren",
      "sketchCode": "let credits = {\n\t\"student_names\": \"Anna BÃ¼rki, Noemi Steffen\",\n\t\"recode_artist\": \"Georg Nees\",\n\t\"recode_title\": \"Pixelgrafik\",\n\t\"recode_year\": 2006\n}\n\n//press mouse!\n\nlet cubes = [];\nlet hintergrund = (255);\nlet wurfel = (0);\nlet wurfelColor = 255;\nlet modeSwitch = 1;\nlet modeMax = 6;\nlet maxSqares = 10;\nlet tempo = .5;\n\nfunction setup() {\n\tcreateCanvas(windowWidth, windowHeight);\n\trectMode(CENTER)\n\n\tfor(let i = 0; i < 500; i++) {\n\t\tlet x = random(width);\n\t\tlet y = random(height);\n\t\tlet s = map(y, 0, height, 2, 40);\n\t\tlet tempCube = createVector(x, y, s);\n\t\tcubes.push(tempCube);\n\t}\n\tsetupAudio();\n\tvar frameCount = 0;\n\tupdateAudio();\n\n}\n\nfunction draw() {\n\t/* audio vars: amp, ampEase, fft, waveform */\n\tif(modeSwitch > 1) {\n\t\tupdateAudio();\n\t}\n\n\tif(frameCount % 500 == 0) {\n\t\tbackground(255);\n\t\tclear();\n\t}\n\n\tif(modeSwitch == 1) {\n\t\tbackground(hintergrund);\n\t\tnoStroke();\n\t\tfill(wurfel);\n\t} else if(modeSwitch == 2) {\n\t\tbackground(hintergrund);\n\t\tnoStroke();\n\t\tfill(wurfel);\n\t} else if(modeSwitch == 3) {\n\t\tbackground(0, 20);\n\t\tnoStroke();\n\t\tfill(255);\n\t} else if(modeSwitch == 4) {\n\t\tbackground(0, 20);\n\t\tnoFill();\n\t\tstroke(255);\n\t\tstrokeWeight(.5);\n\t} else if(modeSwitch == 5) {\n\t\tbackground(hintergrund);\n\t\tnoFill();\n\t\tstroke(wurfel);\n\t\tstrokeWeight(.5);\n\t\ttempo = 10;\n\t} else if(modeSwitch == 6) {\n\t\t//background(255, 20);\n\t\tnoStroke();\n\t\tstroke(0);\n\t\tfill(255);\n\t\tstrokeWeight(.5);\n\t\ttempo = 0.5;\n\t}\n\t/* else if(modeSwitch == 6) {\n\t\tbackground(255, 20);\n\t\tnoFill();\n\t\tstroke(200, 200, 20);\n\t\tstrokeWeight(.5);\n\t} else if(modeSwitch == 7) {\n\t\tbackground(255, 20);\n\t\tnoStroke();\n\t\tfill(200, 200, 20);\n\t} else if(modeSwitch == 8) {\n\t\tbackground(200, 200, 20, 20);\n\t\tnoStroke();\n\t\tfill(255);\n\t}else if(modeSwitch == 9){\n\t\tbackground(255, 20);\n\t\tnoStroke();\n\t\tstroke(200, 200, 20);\n\t\tfill(255);\n\t\tstrokeWeight(.5);\n\t}*/\n\n\n\n\tfor(let i = 0; i < cubes.length; i++) {\n\t\tcubes[i].y -= tempo;\n\t\tif(cubes[i].y < -10) {\n\t\t\tcubes[i].y = height + 20;\n\t\t}\n\t\tlet fftIndex = map(i, 0, cubes.length, 0, fft.length)\n\t\tlet audioFFT = fft[floor(fftIndex)];\n\t\tlet tempCube = cubes[i];\n\t\tlet s = map(tempCube.y, 0, height, 2, 40 + ampEase * 1);\n\n\t\tif(modeSwitch == 3) {\n\t\t\ts = map(tempCube.y, 0, height, 40 + ampEase * 1, 2);\n\t\t}\n\t\t//square(tempCube.x + noise(i * 10 + frameCount * .0005 * i) * 5, tempCube.y, s / ampEase * 50);\n\t\tsquare(tempCube.x, tempCube.y, s);\n\t}\n\n\n\n}\n\n\nfunction mousePressed() {\n\tmodeSwitch++;\n\tif(modeSwitch > modeMax) {\n\t\tmodeSwitch = 1;\n\t}\n}\n\n\n/* AUDIO INIT */\nlet mic, fftRaw, fft = [],\n\twaveform = [],\n\tamp = 0.0,\n\tampStereo = {\n\t\tl: 0.0,\n\t\tr: 0.0\n\t},\n\tampEase = 0.0,\n\tnumBins = 512,\n\tbands = 12;\n\nfunction setupAudio() {\n\tuserStartAudio();\n\tmic = new p5.AudioIn();\n\tmic.start();\n\tfftRaw = new p5.FFT(0.75, numBins);\n\tfftRaw.setInput(mic);\n}\n\nfunction updateAudio() {\n\tfftRaw.analyze();\n\tamp = mic.getLevel() * 1000; // average mixed amplitude\n\tampStereo.l = mic.amplitude.getLevel(0) * 500; // average left amplitude\n\tampStereo.r = mic.amplitude.getLevel(1) * 500; // average right amplitude\n\tampEase = ease(amp, ampEase, 0.075); // smooth 'amp'\n\twaveform = fftRaw.waveform(); // array (-1, 1)\n\tfft = fftRaw.logAverages(fftRaw.getOctaveBands(bands)); // array (0, 255)\n}"
    }
  ]
}