{
  "sketches": [
    {
      "sketchName": "dairian_final_2",
      "sketchCode": "let credits = {\n\t\"student_names\": \"Celine Wassmer, Cian Jochem\",\n\t\"recode_artist\": \"Manuel Barbadillo\",\n\t\"recode_title\": \"Dairian\",\n\t\"recode_year\": 1973\n}\n\n\nfunction setup() {\n\tcreateCanvas(windowWidth, windowHeight);\n\t//rectMode(CENTER);\n\tlayer = createGraphics(100, 200);\n\tlayer2 = createGraphics(100, 200);\n\timageMode(CENTER);\n\tlayer.noStroke();\n\tlayer2.noStroke();\n\tangleMode(DEGREES);\n\tsetupAudio();\n}\n\nfunction draw() {\n\t/* audio vars: amp, ampEase, fft, waveform */\n\tupdateAudio();\n\t\n\tbackground(0);\n\n\n\tlet ic = 20\n\tfor(let i = 0; i < ic; i++) {\n\t\tfor(let j = 0; j < ic; j++) {\n\n\t\t\tlet wf = waveform[floor(map(j, 0, ic - 1, 0, waveform.length))];\n\t\t\tlet ft = fft[floor(map(i, 0, ic - 1, 0, fft.length))];\n\n\t\t\tlet mx = map((mouseX, 0, width, 0, 1000));\n\t\t\t\n\t\t\t\n\t\tif(fft.length < 1){\n\t\t\tlayer.width = 100, 200;\n\t\t\tlayer2.width = 100, 200;\n\t\t\t}else{\n\t\t\tlayer.width = 100 * ampEase * .01;\n\t\t\tlayer2.width = 100 * ampEase * .01;\n\n\t\t\tlayer.height = 200 * ampEase * .01;\n\t\t\tlayer2.height = 200 * ampEase * .01;\n\t\t}\n\n\n\n\n\t\t\tif(i % 2 == 0) { // evens\n\t\t\t\tc1 = color(0, 0, 0);\n\t\t\t\tc2 = 255;\n\t\t\t}\n\n\n\n\n\t\t\tif(j % 2 == 0) { // evens\n\t\t\t\tpush();\n\t\t\t\ttranslate(j * layer.width, i * layer.height);\n\t\t\t\trotate(180);\n\t\t\t\timage(layer2, 0, wf * mouseX + 100);\n\t\t\t\tpop();\n\t\t\t} else {\n\t\t\t\tpush();\n\t\t\t\ttranslate(j * layer.width, i * layer.height);\n\t\t\t\t//rotate(180);\n\t\t\t\timage(layer, 0, wf * mouseY);\n\t\t\t\tpop();\n\t\t\t}\n\t\t\t\n\t\t\tif (mouseIsPressed){\n\t\t\t\tc1 = color(0, 0, ft)\n\t\t\t}\n\t\t\t\n\t\t\tif(key == 'enter'){ \n\t\t\t\tlayer1.Fill(0);\n\t\t\t\tlayer1.stroke(255);\n\t\t\t}\n\t\t\t\n\t\t\t\n\n\n\t\t\tlayer.fill(c2);\n\t\t\tlayer.rect(0, 0, layer.width, layer.height);\n\t\t\tlayer.fill(c1);\n\t\t\tlayer.rect(0, 0, layer.width, layer.height, 15);\n\t\t\tlayer.fill(c2);\n\t\t\tlayer.rect(layer.width - layer.width * .75, layer.height - layer.height * 0.875, layer.width * .75, layer.height * .75, 15);\n\t\t\tlayer.fill(c1);\n\t\t\tlayer.rect(layer.width - layer.width * .5, layer.height - layer.height * 0.75, layer.width * .5, layer.height * .5, 15);\n\t\t\tlayer.fill(c2);\n\t\t\tlayer.rect(layer.width - layer.width * .25, layer.height - layer.height * 0.625, layer.width * .25, layer.height * .25, 15);\n\n\t\t\tlayer2.fill(c1);\n\t\t\tlayer2.rect(0, 0, layer.width, layer.height);\n\t\t\tlayer2.fill(c2);\n\t\t\tlayer2.rect(0, 0, layer.width, layer.height, 15);\n\t\t\tlayer2.fill(c1);\n\t\t\tlayer2.rect(layer.width - layer.width * .75, layer.height - layer.height * .875, layer.width * .75, layer.height * .75, 15);\n\t\t\tlayer2.fill(c2);\n\t\t\tlayer2.rect(layer.width - layer.width * .5, layer.height - layer.height * 0.75, layer.width * .5, layer.height * .5, 15);\n\t\t\tlayer2.fill(c1);\n\t\t\tlayer2.rect(layer.width - layer.width * .25, layer.height - layer.height * 0.625, layer.width * .25, layer.height * .25, 15);\n\t\t}\n\t}\n\n\t/*\n\t\n\tpush();\n\trotate(180);\n\timage(layer, -width/2 - 200, -height/2+350);\n\tpop();\n\t\n\timage(layer, width/2, 200);\n\t\n\tpush();\n\trotate(180);\n\timage(layer, -width/2 + 200, -height/2-50);\n\tpop();\n\t\n\t\n\timage(layer, width/2-400, 600);\n\t\n\tpush();\n\trotate(180);\n\timage(layer, -width/2 - 200, -height/2-450);\n\tpop();\n\t\n\t\n\timage(layer2, width/2, 600);\n\t\n\tpush();\n\trotate(180);\n\timage(layer2, -width/2 +200, -height/2+350);\n\tpop();\n\t\n\timage(layer2, width/2- 400, 200);\n\t\n\tpush();\n\trotate(180);\n\timage(layer2, -width/2 +200, -height/2-450);\n\tpop();\n\t\n\tpush();\n\trotate(180);\n\timage(layer2, -width/2 -200, -height/2-50);\n\tpop();\n\t\n\t*/\n\t\n\n\t\t\t\n\n\n}\n\n\n\n/* AUDIO INIT */\nlet mic, fftRaw, fft, waveform, amp = 0.0,\n\tampEase = 0.0,\n\tnumBins = 512,\n\tbands = 12;\n\nfunction setupAudio() {\n\tmic = new p5.AudioIn();\n\tmic.start();\n\tfftRaw = new p5.FFT(0.75, numBins);\n\tfftRaw.setInput(mic);\n}\n\nfunction updateAudio() {\n\tfftRaw.analyze();\n\tamp = mic.getLevel() * 1000; // average amplitude\n\tampEase = ease(amp, ampEase, 0.075); // smooth 'amp'\n\twaveform = fftRaw.waveform(); // array (-1, 1)\n\tfft = fftRaw.logAverages(fftRaw.getOctaveBands(bands)); // array (0, 255)\n}"
    }
  ]
}
